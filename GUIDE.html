<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MLOps Project Guide — Customer Churn Prediction</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --bg: #0f1117;
      --surface: #1a1d27;
      --surface2: #22263a;
      --accent: #6c63ff;
      --accent2: #00d4aa;
      --accent3: #ff6584;
      --text: #e2e8f0;
      --muted: #8892a4;
      --border: #2d3250;
      --code-bg: #13151f;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.7;
    }

    /* Header */
    header {
      background: linear-gradient(135deg, #1a1d27 0%, #13151f 50%, #1a1d27 100%);
      border-bottom: 1px solid var(--border);
      padding: 3rem 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    header::before {
      content: '';
      position: absolute;
      top: -80px; left: 50%; transform: translateX(-50%);
      width: 600px; height: 300px;
      background: radial-gradient(ellipse, rgba(108,99,255,0.15) 0%, transparent 70%);
      pointer-events: none;
    }
    .badge {
      display: inline-block;
      background: rgba(108,99,255,0.15);
      border: 1px solid rgba(108,99,255,0.4);
      color: #a89bff;
      padding: 4px 14px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 1rem;
    }
    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #fff 0%, #a89bff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.75rem;
    }
    header p {
      color: var(--muted);
      font-size: 1.05rem;
      max-width: 560px;
      margin: 0 auto;
    }

    /* Links bar */
    .links-bar {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.75rem;
      padding: 1.5rem 2rem;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
    }
    .link-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 16px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--surface2);
      color: var(--text);
      font-size: 0.85rem;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.2s;
    }
    .link-chip:hover { border-color: var(--accent); color: #a89bff; transform: translateY(-1px); }
    .link-chip .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent2); }
    .link-chip.local .dot { background: var(--accent3); }

    /* Layout */
    .container { max-width: 860px; margin: 0 auto; padding: 2.5rem 1.5rem; }

    /* Section */
    section { margin-bottom: 2.5rem; }
    .section-title {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    /* Steps */
    .step {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem 1.75rem;
      margin-bottom: 1rem;
      position: relative;
      transition: border-color 0.2s;
    }
    .step:hover { border-color: rgba(108,99,255,0.4); }
    .step-num {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px; height: 28px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), #9c94ff);
      color: #fff;
      font-size: 0.8rem;
      font-weight: 700;
      margin-right: 0.75rem;
      flex-shrink: 0;
    }
    .step-header {
      display: flex;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    .step-header h3 {
      font-size: 1rem;
      font-weight: 600;
      color: #fff;
    }
    .step-note {
      background: rgba(0,212,170,0.07);
      border-left: 3px solid var(--accent2);
      border-radius: 4px;
      padding: 0.5rem 0.85rem;
      font-size: 0.82rem;
      color: var(--accent2);
      margin-top: 0.6rem;
    }
    .step-warning {
      background: rgba(255,101,132,0.07);
      border-left: 3px solid var(--accent3);
      border-radius: 4px;
      padding: 0.5rem 0.85rem;
      font-size: 0.82rem;
      color: var(--accent3);
      margin-bottom: 0.75rem;
    }

    /* Code blocks */
    pre {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem 1.25rem;
      overflow-x: auto;
      margin-top: 0.75rem;
      position: relative;
    }
    code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.82rem;
      color: #c9d1d9;
    }
    .comment { color: #6e7681; }
    .keyword { color: #ff79c6; }
    .string { color: #a9dc76; }
    .cmd { color: var(--accent2); }
    .copy-btn {
      position: absolute;
      top: 8px; right: 10px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--muted);
      font-size: 0.72rem;
      padding: 3px 10px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .copy-btn:hover { background: var(--accent); color: #fff; border-color: var(--accent); }

    /* Tables */
    table { width: 100%; border-collapse: collapse; margin-top: 0.75rem; font-size: 0.87rem; }
    th {
      background: var(--surface2);
      color: var(--muted);
      font-weight: 600;
      font-size: 0.72rem;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      padding: 0.6rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    td {
      padding: 0.65rem 1rem;
      border-bottom: 1px solid rgba(45,50,80,0.5);
      color: var(--text);
    }
    tr:last-child td { border-bottom: none; }
    tr:hover td { background: rgba(108,99,255,0.04); }
    td a { color: #a89bff; text-decoration: none; }
    td a:hover { text-decoration: underline; }
    td code { background: var(--code-bg); padding: 2px 6px; border-radius: 4px; color: var(--accent2); }

    /* Tags */
    .tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
    }
    .tag-green { background: rgba(0,212,170,0.12); color: var(--accent2); }
    .tag-purple { background: rgba(108,99,255,0.12); color: #a89bff; }
    .tag-red { background: rgba(255,101,132,0.12); color: var(--accent3); }

    /* JSON example */
    .json-block {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.25rem;
      margin-top: 0.75rem;
    }

    /* Pipeline flow */
    .pipeline {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-top: 0.75rem;
    }
    .pipe-stage {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.5rem 1rem;
      font-size: 0.83rem;
      font-weight: 500;
      color: #a89bff;
    }
    .pipe-arrow { color: var(--muted); font-size: 1.1rem; }

    /* Footer */
    footer {
      text-align: center;
      padding: 2rem;
      color: var(--muted);
      font-size: 0.8rem;
      border-top: 1px solid var(--border);
    }
  </style>
</head>
<body>

<header>
  <div class="badge">MLOps Project</div>
  <h1>Customer Churn Prediction</h1>
  <p>End-to-end ML pipeline with DVC, MLflow, FastAPI, and Airflow</p>
</header>

<div class="links-bar">
  <a class="link-chip" href="https://github.com/DilshanPradeep/churn-mlops-project" target="_blank">
    <span class="dot"></span> GitHub Repository
  </a>
  <a class="link-chip" href="https://dagshub.com/DilshanPradeep/churn-mlops-project" target="_blank">
    <span class="dot"></span> DAGsHub Project
  </a>
  <a class="link-chip local" href="http://127.0.0.1:5000" target="_blank">
    <span class="dot local"></span> MLflow UI (Local)
  </a>
  <a class="link-chip local" href="http://127.0.0.1:8000/docs" target="_blank">
    <span class="dot local"></span> API Docs (Local)
  </a>
</div>

<div class="container">

  <!-- Project Files -->
  <section>
    <div class="section-title">Project Files</div>
    <div class="step" style="padding: 0.5rem;">
      <table>
        <tr>
          <th>File</th><th>Stage</th><th>Purpose</th>
        </tr>
        <tr>
          <td><a href="src/data_ingestion.py">data_ingestion.py</a></td>
          <td><span class="tag tag-purple">Stage 1</span></td>
          <td>Loads raw CSV from <code>data/raw/</code></td>
        </tr>
        <tr>
          <td><a href="src/preprocessing.py">preprocessing.py</a></td>
          <td><span class="tag tag-purple">Stage 2</span></td>
          <td>Cleans, encodes, and scales data</td>
        </tr>
        <tr>
          <td><a href="src/train.py">train.py</a></td>
          <td><span class="tag tag-purple">Stage 3</span></td>
          <td>Trains Logistic Regression, Random Forest, XGBoost</td>
        </tr>
        <tr>
          <td><a href="src/evaluate.py">evaluate.py</a></td>
          <td><span class="tag tag-purple">Stage 4</span></td>
          <td>Evaluates all models, picks best, saves metrics</td>
        </tr>
        <tr>
          <td><a href="api/main.py">api/main.py</a></td>
          <td><span class="tag tag-green">API</span></td>
          <td>FastAPI server for live churn predictions</td>
        </tr>
        <tr>
          <td><a href="airflow_dags/churn_pipeline.py">airflow_dags/churn_pipeline.py</a></td>
          <td><span class="tag tag-green">Orchestration</span></td>
          <td>Airflow DAG to automate the pipeline</td>
        </tr>
        <tr>
          <td><a href="dvc.yaml">dvc.yaml</a></td>
          <td><span class="tag tag-red">Config</span></td>
          <td>DVC pipeline stage definitions</td>
        </tr>
        <tr>
          <td><a href="requirements.txt">requirements.txt</a></td>
          <td><span class="tag tag-red">Config</span></td>
          <td>All Python dependencies</td>
        </tr>
      </table>
    </div>
  </section>

  <!-- Steps -->
  <section>
    <div class="section-title">Step-by-Step Execution</div>

    <div class="step">
      <div class="step-warning">⚠️ ALL commands must be run from inside <code>churn-mlops-project\</code></div>
      <div class="step-header">
        <span class="step-num">1</span>
        <h3>Open Terminal & Navigate to Project</h3>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code><span class="cmd">cd</span> "d:\SLTC\SEM 7\ML\ML Ops\Code\churn-mlops-project"</code></pre>
    </div>

    <div class="step">
      <div class="step-header">
        <span class="step-num">2</span>
        <h3>Fix Git Path — Run Every New Terminal</h3>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>$<span class="keyword">env</span>:Path += <span class="string">";C:\Program Files\Git\cmd"</span></code></pre>
      <div class="step-note">Git was newly installed. This makes it available in your current session.</div>
    </div>

    <div class="step">
      <div class="step-header">
        <span class="step-num">3</span>
        <h3>Install Dependencies — Do This Once</h3>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>pip install -r requirements.txt
pip install dvc-s3</code></pre>
    </div>

    <div class="step">
      <div class="step-header">
        <span class="step-num">4</span>
        <h3>Run the Full ML Pipeline</h3>
      </div>
      <div class="pipeline">
        <div class="pipe-stage">data_ingestion</div>
        <span class="pipe-arrow">→</span>
        <div class="pipe-stage">data_preprocessing</div>
        <span class="pipe-arrow">→</span>
        <div class="pipe-stage">model_training</div>
        <span class="pipe-arrow">→</span>
        <div class="pipe-stage">model_evaluation</div>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>dvc repro</code></pre>
      <div class="step-note">✅ Success: "Best Model: Logistic_Regression with Accuracy: 0.815..."</div>
    </div>

    <div class="step">
      <div class="step-header">
        <span class="step-num">5</span>
        <h3>Push Data to DAGsHub</h3>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>dvc push</code></pre>
    </div>

    <div class="step">
      <div class="step-header">
        <span class="step-num">6</span>
        <h3>Push Code to GitHub</h3>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>git add .
git commit -m <span class="string">"Complete MLOps pipeline"</span>
git push</code></pre>
    </div>

    <div class="step">
      <div class="step-header">
        <span class="step-num">7</span>
        <h3>View MLflow Experiments</h3>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>mlflow ui</code></pre>
      <div class="step-note">Open → <a href="http://127.0.0.1:5000" target="_blank" style="color:#a89bff">http://127.0.0.1:5000</a> — compare Logistic Regression vs. Random Forest vs. XGBoost</div>
    </div>

    <div class="step">
      <div class="step-header">
        <span class="step-num">8</span>
        <h3>Start the Prediction API</h3>
      </div>
      <pre><button class="copy-btn" onclick="copyCode(this)">Copy</button><code>uvicorn api.main:app --reload</code></pre>
      <div class="step-note">Open → <a href="http://127.0.0.1:8000/docs" target="_blank" style="color:#a89bff">http://127.0.0.1:8000/docs</a> — use the interactive Swagger UI to test predictions</div>

      <p style="margin-top:1rem; font-size:0.85rem; color:var(--muted)">Test JSON (high-risk customer):</p>
      <div class="json-block">
        <pre style="border:none; background:none; margin:0; padding:0;"><code>{
  <span class="string">"gender"</span>: <span class="string">"Female"</span>,
  <span class="string">"SeniorCitizen"</span>: 0,
  <span class="string">"Partner"</span>: <span class="string">"Yes"</span>,
  <span class="string">"Dependents"</span>: <span class="string">"No"</span>,
  <span class="string">"tenure"</span>: 1,
  <span class="string">"PhoneService"</span>: <span class="string">"No"</span>,
  <span class="string">"MultipleLines"</span>: <span class="string">"No phone service"</span>,
  <span class="string">"InternetService"</span>: <span class="string">"DSL"</span>,
  <span class="string">"OnlineSecurity"</span>: <span class="string">"No"</span>,
  <span class="string">"OnlineBackup"</span>: <span class="string">"Yes"</span>,
  <span class="string">"DeviceProtection"</span>: <span class="string">"No"</span>,
  <span class="string">"TechSupport"</span>: <span class="string">"No"</span>,
  <span class="string">"StreamingTV"</span>: <span class="string">"No"</span>,
  <span class="string">"StreamingMovies"</span>: <span class="string">"No"</span>,
  <span class="string">"Contract"</span>: <span class="string">"Month-to-month"</span>,
  <span class="string">"PaperlessBilling"</span>: <span class="string">"Yes"</span>,
  <span class="string">"PaymentMethod"</span>: <span class="string">"Electronic check"</span>,
  <span class="string">"MonthlyCharges"</span>: 29.85,
  <span class="string">"TotalCharges"</span>: 29.85
}</code></pre>
      </div>
    </div>
  </section>

  <!-- Troubleshooting -->
  <section>
    <div class="section-title">Troubleshooting</div>
    <div class="step" style="padding: 0.5rem;">
      <table>
        <tr><th>Error</th><th>Fix</th></tr>
        <tr>
          <td><code>'git' is not recognized</code></td>
          <td>Run <code>$env:Path += ";C:\Program Files\Git\cmd"</code></td>
        </tr>
        <tr>
          <td><code>not inside of a DVC repository</code></td>
          <td>Run <code>cd churn-mlops-project</code> first</td>
        </tr>
        <tr>
          <td><code>No module named dvc_s3</code></td>
          <td>Run <code>pip install dvc-s3</code></td>
        </tr>
        <tr>
          <td>API gives 500 error</td>
          <td>Run <code>dvc repro</code> first to generate model files</td>
        </tr>
        <tr>
          <td>Stage is cached — skipping</td>
          <td>This is <strong>normal & good</strong> — DVC only reruns changed stages</td>
        </tr>
        <tr>
          <td><code>Author identity unknown</code></td>
          <td>Run <code>git config --global user.email "you@example.com"</code></td>
        </tr>
      </table>
    </div>
  </section>

  <!-- What each tool does -->
  <section>
    <div class="section-title">What Each Tool Does</div>
    <div class="step" style="padding: 0.5rem;">
      <table>
        <tr><th>Tool</th><th>Role in This Project</th></tr>
        <tr><td><strong>Git</strong></td><td>Tracks every code change with history</td></tr>
        <tr><td><strong>GitHub</strong></td><td>Cloud backup for your code</td></tr>
        <tr><td><strong>DVC</strong></td><td>Tracks large data & model files (too big for Git)</td></tr>
        <tr><td><strong>DAGsHub</strong></td><td>Cloud storage for data + hosts MLflow server</td></tr>
        <tr><td><strong>MLflow</strong></td><td>Records and compares experiment results</td></tr>
        <tr><td><strong>FastAPI</strong></td><td>Turns the model into a live web API</td></tr>
        <tr><td><strong>Airflow</strong></td><td>Automates the pipeline on a schedule</td></tr>
        <tr><td><strong>Docker</strong></td><td>Packages the API so it runs anywhere</td></tr>
      </table>
    </div>
  </section>

</div>

<footer>Customer Churn MLOps Project &mdash; SLTC University &mdash; 2026</footer>

<script>
  function copyCode(btn) {
    const pre = btn.parentElement;
    const code = pre.textContent.replace('Copy', '').trim();
    navigator.clipboard.writeText(code).then(() => {
      btn.textContent = 'Copied!';
      setTimeout(() => btn.textContent = 'Copy', 1500);
    });
  }
</script>
</body>
</html>
